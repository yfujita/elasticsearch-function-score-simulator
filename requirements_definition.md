# 要件定義

## 1. 目的

Elasticsearchの`function_score`クエリにおけるスコア計算の挙動を、ブラウザ上で視覚的にシミュレーションし理解を深める。
特に、フィールド値の変化（数値や日付）がどのようにスコアに影響するかをグラフで確認可能にする。

## 2. 機能要件

### 2.1. シミュレーション変数（X軸）定義

グラフのX軸となる変数を定義する機能。

- **フィールド名**: シミュレーション対象のフィールド名（例: `price`, `publish_date`）
- **データ型**: 数値 (Numeric) または 日付 (Date)
- **範囲**: 最小値 (Min) と 最大値 (Max)

### 2.2. Function Score 設定

Elasticsearch の `function_score` クエリに関する設定を入力する機能。

- **Functions 定義**: `functions` 配列のJSONを入力する。（`field_value_factor`, `gauss`, `linear`, `exp` 等に対応）
  - functionのスコア値はマイナスも許容する。
  - weightにマイナス値も許容する。
  - field_value_factorのmodifierにln（古いESにはあるが、最近のESにはない）をサポートする。

### 2.3. スコア計算可視化（グラフ）

設定された変数範囲と関数に基づいてスコアを計算し、グラフ描画する機能。

- **X軸**: 2.1で定義したフィールドの値
- **Y軸**: 計算されたスコア
- **表示内容**:
    - 各 Function 単体のスコア

## 3. UI/UX要件

- **ワンページ・レイアウト**: パラメータの調整と結果の確認を高速に行うため、**設定入力エリアとグラフ表示エリアを1つの画面内に収める**（スクロールを極力排除したDashboard的な配置）。

## 4. 非機能要件

- **クライアントサイド計算**: Elasticsearch サーバーへのリクエストは行わず、TypeScript 上で公式ドキュメントの計算式に基づいたシミュレーションロジックを実装する（完全な再現ではなく、傾向把握のための近似シミュレーション）。
- **公開**: GitHub Pages での公開を想定し、外部APIに依存しない静的サイトとする。

## 5. 技術スタック

- TypeScript
- React
- Vite
